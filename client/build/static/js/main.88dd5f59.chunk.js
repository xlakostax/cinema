(this.webpackJsonpcinema=this.webpackJsonpcinema||[]).push([[0],{53:function(e,n,t){},67:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t(2),s=t.n(i),r=t(28),c=t.n(r),o=t(13),l=t(5),d=t(10),b=t(29),j=(t(48),t(51),b.a.initializeApp({apiKey:"AIzaSyCGzAW0EQw1arWaymUIVJULeOSwrjmG4kE",authDomain:"valamis-cinema.firebaseapp.com",projectId:"valamis-cinema",databaseURL:"https://valamis-cinema-default-rtdb.firebaseio.com/",storageBucket:"valamis-cinema.appspot.com",messagingSenderId:"960492642380",appId:"1:960492642380:web:d3b5b14a7ea87b653bd4e9",measurementId:"G-ZBQCYRLB8E"})),u=(b.a.database(),s.a.createContext()),p=function(e){var n=e.children,t=Object(i.useState)(null),s=Object(d.a)(t,2),r=s[0],c=s[1];return Object(i.useEffect)((function(){j.auth().onAuthStateChanged((function(e){c(e)}))}),[]),Object(a.jsx)(u.Provider,{value:{currentUser:r},children:n})},h=(t(53),t(11)),x=t(42),m=t(16),O=t(17);function f(){var e=Object(m.a)(["\n  grid-area: footer;\n  position: relative;\n  width: 80%;\n  margin: 0 auto;\n  padding: 1.2em 0;\n  text-align: center;\n"]);return f=function(){return e},e}function g(){var e=Object(m.a)(["\n  position: relative;\n  width: 100%;\n  & button {\n    position: relative;\n    padding: 1rem;\n    background-color: transparent;\n    height: 4rem;\n    width: 7rem;\n    border-radius: 5px 5px;\n    border: 1px solid #2F2F2F;\n    text-transform: uppercase;\n  }\n  & button:hover {\n    cursor: pointer;\n    color: #46B29A;\n    border: 2px solid #46B29A;\n  }\n  & form {\n    margin-bottom: 1rem;\n    & input {\n      display: block;\n      width: 100%;\n      height: 2rem;\n      margin: 0 0 1rem 0;\n      border-radius: 5px 5px;\n      border: 1px solid #DCDCDC;\n    }\n  }\n  & .seats {\n    align-items: center;\n    display: flex;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: -webkit-flex;\n    flex-direction: column;\n    & .seats-area {\n      display: flex;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: -webkit-flex;\n      flex-direction: row;\n      justify-content: space-between;\n      width: 100%;\n      & label {\n        display: flex;\n        align-items: center;\n        position: relative;\n        height: 1.2rem;\n        min-width: 1.2rem;\n        font-size: 1rem;\n        padding: 1rem;\n        border: 1px solid #46B29A;\n        border-radius: 5px 5px;\n        cursor: pointer;\n        user-select: none;\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            -o-user-select: none;\n        @media (max-width: 424px) {\n          padding: 0.5rem;\n          font-size: 0.8rem;\n        }\n        & input {\n          position: absolute;\n          width: 0;\n          height: 0;\n          opacity: 0;\n          cursor: pointer;\n        }\n      }\n    }\n    & .screen {\n      width: 100%;\n      text-align: center;\n      border: 1px solid #46B29A;\n      border-radius: 5px 5px;\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=Object(m.a)(["\n  grid-area: main;\n  position: relative;\n  width: 100%;\n  & h1 {\n    font-size: 2rem;\n    margin: 1.2rem 0;\n    position: relative;\n    text-align: center;\n  }\n"]);return v=function(){return e},e}function w(){var e=Object(m.a)(["\n  grid-area: header;\n  display: flex;\n  justify-content: space-between;\n  margin: 0 auto;\n  width: 80%;\n  padding: 1.2rem 0;\n  text-align: right;\n  & a {\n    cursor: pointer;\n  }\n  @media (max-width: 539px) {\n    flex-direction: column;\n    align-items: center;\n  }\n"]);return w=function(){return e},e}var y=O.a.header(w()),k=O.a.main(v()),C=O.a.section(g()),S=O.a.footer(f()),B=(new Date).getFullYear(),A=function(){return Object(a.jsxs)(S,{children:[Object(a.jsxs)("p",{children:["\xa9"," Konstantin Veselovskii | ",Object(a.jsx)("span",{id:"year",children:B})]}),Object(a.jsxs)("p",{children:["Made with ",Object(a.jsx)("span",{role:"img","aria-label":"heart",children:"\u2764\ufe0f"})," in Espoo."]})]})},D=function(){var e=Object(i.useContext)(u).currentUser;return Object(a.jsxs)(y,{children:[Object(a.jsxs)("p",{children:[e.email,"!"]}),Object(a.jsx)("a",{href:"#",onClick:function(){return j.auth().signOut()},children:"Sign out"})]})},F=function(){var e=Object(i.useState)({seats:[]}),n=Object(d.a)(e,2),t=n[0],s=n[1],r=Object(i.useContext)(u).currentUser;if(Object(i.useEffect)((function(){j.database().ref("seats/").on("value",(function(e){var n=e.val();s({seats:Object(x.a)(n)})}))}),[r]),!r)return Object(a.jsx)(l.a,{to:"/signin"});var c=function(e){var n=Object(h.a)({},t);n.seats[e.target.id-1]={id:e.target.id,isBooked:e.target.checked,bookedBy:e.target.checked?r.uid:""},s(Object(h.a)({},n)),console.log(t)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(D,{}),Object(a.jsx)(k,{children:Object(a.jsxs)(C,{children:[Object(a.jsx)("p",{children:'Welcome to "The Cinema"! Please, choose a seat and enjoy the best movie ever!'}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{style:{color:"#46B29A"},children:"Your booking"}),Object(a.jsx)("p",{style:{color:"#FF6347"},children:"Booked"}),Object(a.jsx)("br",{}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j.database().ref().set(Object(h.a)({},t))},className:"seats",children:[Object(a.jsx)("div",{className:"seats-area",children:0===t.seats.length?Object(a.jsx)("div",{children:"Loading..."}):t.seats.map((function(e,n){return Object(a.jsxs)("label",{style:e.isBooked&&r.uid===e.bookedBy?{backgroundColor:"#46B29A"}:e.isBooked?{backgroundColor:"#FF6347"}:{backgroundColor:"#FFF"},className:"checkbox-label",children:[e.id,Object(a.jsx)("input",{id:e.id,type:"checkbox",name:e.id,value:e.id,disabled:e.bookedBy!==r.uid&&""!==e.bookedBy,onChange:c,checked:e.isBooked})]},n)}))}),Object(a.jsx)("br",{}),Object(a.jsx)("p",{className:"screen",children:"Screen"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",name:"book",children:"Book"})})]})]})}),Object(a.jsx)(A,{})]})},I=function(){var e=Object(i.useContext)(u).currentUser;return Object(a.jsx)(k,{children:Object(a.jsxs)(C,{children:[Object(a.jsx)("h1",{children:'Welcome to "The Cinema"'}),e?Object(a.jsxs)("p",{style:{textAlign:"center"},children:["You are signed in. ",Object(a.jsx)(o.b,{to:"/dashboard",children:"View Dashboard"})]}):Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(a.jsx)(o.b,{to:"/signin",children:"Sign In"}),Object(a.jsx)(o.b,{to:"/signup",children:"Don't have an account?"})]})]})})};function z(){var e=Object(m.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  & p {\n    display: block;\n    text-transform: uppercase;\n    text-align: center;\n    font-size: 3em;\n  }\n  & a {\n    position: relative;\n    display: inline-block;\n    &:after {\n      content: '';\n      position: absolute;\n      background-color: #46B29A;\n      top: 60%;\n      left: -0.1rem;\n      right: -0.1rem;\n      bottom: 0;\n      z-index: -1;\n      transition: top 200ms ease-in-out;\n    }\n    &:hover:after {\n      top: 0%;\n    }\n"]);return z=function(){return e},e}var E=O.a.div(z()),U=function(){return Object(a.jsxs)(E,{children:[Object(a.jsxs)("p",{children:["404 ",Object(a.jsx)("br",{}),"Page not found"]})," ",Object(a.jsx)("br",{}),Object(a.jsx)("a",{href:"/",children:"Go back home"})]})},N=t(19),Y=function(){var e=Object(i.useState)({email:"",password:""}),n=Object(d.a)(e,2),t=n[0],s=n[1],r=function(e){e.preventDefault();var n=e.target.name,a=e.target.value;s(Object(h.a)(Object(h.a)({},t),{},Object(N.a)({},n,a)))};return Object(i.useContext)(u).currentUser?Object(a.jsx)(l.a,{to:"/dashboard"}):Object(a.jsx)(k,{children:Object(a.jsxs)(C,{className:"wrapper",children:[Object(a.jsx)("h1",{children:"Sign In:"}),Object(a.jsx)("br",{}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target.elements,t=n.email,a=n.password;try{j.auth().signInWithEmailAndPassword(t.value,a.value)}catch(i){alert(i)}},children:[Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:["Your email:",Object(a.jsx)("input",{id:"email",type:"email",name:"email",value:t.email,onChange:r,required:!0})]})}),Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:["Your password:",Object(a.jsx)("input",{id:"password",type:"password",name:"password",value:t.password,onChange:r,required:!0})]})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",name:"signin",children:"Sign In"})})]})]})})},M=t(40),q=t.n(M),L=t(41),W=t.n(L),P=function(){var e=Object(i.useState)({email:"",password:""}),n=Object(d.a)(e,2),t=n[0],s=n[1],r=Object(i.useState)({info:"",visible:!1}),c=Object(d.a)(r,2),o=c[0],b=c[1],u=Object(i.useState)({disabled:!1}),p=Object(d.a)(u,2),x=p[0],m=p[1],O=Object(i.useState)(null),f=Object(d.a)(O,2),g=f[0],v=f[1],w=function(e){e.preventDefault();var n=e.target.name,a=e.target.value;console.log(n,a),console.log(t.email,t.password),s(Object(h.a)(Object(h.a)({},t),{},Object(N.a)({},n,a)))};if(g)return Object(a.jsx)(l.a,{to:"/dashboard"});var y=function(){s({email:"",password:""}),b({showModal:!1,info:""}),m({disabled:!1})},S=q.a.sanitize;return Object(a.jsx)(k,{children:Object(a.jsxs)(C,{className:"wrapper",children:[Object(a.jsxs)(W.a,{isOpen:o.showModal,contentLabel:"onRequestClose",onRequestClose:y,className:"Modal",overlayClassName:"Overlay",shouldCloseOnOverlayClick:!1,children:[Object(a.jsx)("i",{className:"fas fa-times",onClick:y,style:{cursor:"pointer",marginRight:"1rem"}}),Object(a.jsx)("p",{dangerouslySetInnerHTML:{__html:S(o.info)}})]}),Object(a.jsx)("h1",{children:"Sign up:"}),Object(a.jsx)("br",{}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m({disabled:!0});var n=t.password,a=t.email;j.auth().createUserWithEmailAndPassword(a,n).then((function(e){console.log(e),v(e),b({showModal:!0,info:"Successfully signed</span>."}),console.log("Successful")})).catch((function(e){b({showModal:!0,info:"<span>Error.</span> ".concat(e.message,".")})}))},children:[Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:["Your email:",Object(a.jsx)("input",{id:"email",type:"email",name:"email",value:t.email,onChange:w,required:!0})]})}),Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:["Your password:",Object(a.jsx)("input",{id:"password",type:"password",name:"password",value:t.password,onChange:w,required:!0})]})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",name:"signup",disabled:x.disabled,children:"Sign Up"})})]})]})})},R=Object(a.jsx)(p,{children:Object(a.jsx)(o.a,{children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",component:I}),Object(a.jsx)(l.b,{exact:!0,path:"/dashboard",component:F}),Object(a.jsx)(l.b,{exact:!0,path:"/signin",component:Y}),Object(a.jsx)(l.b,{exact:!0,path:"/signup",component:P}),Object(a.jsx)(l.b,{path:"*",component:U}),"  "]})})});c.a.render(R,document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.88dd5f59.chunk.js.map